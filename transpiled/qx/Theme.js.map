{
  "version": 3,
  "sources": [
    "/home/travis/build/qooxdoo/qxl.dialog/node_modules/@qooxdoo/compiler/node_modules/@qooxdoo/framework/source/class/qx/Theme.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "define",
    "statics",
    "name",
    "config",
    "include",
    "__normalizeArray",
    "patch",
    "__validateConfig",
    "theme",
    "$$type",
    "title",
    "toString",
    "genericToString",
    "extend",
    "supertheme",
    "basename",
    "createNamespace",
    "__convert",
    "__initializeAliases",
    "$$registry",
    "i",
    "a",
    "l",
    "length",
    "boot",
    "objectOrArray",
    "isArray",
    "aliases",
    "objectMergeWith",
    "getAll",
    "getByName",
    "isDefined",
    "undefined",
    "getTotalNumber",
    "objectGetLength",
    "__extractType",
    "keys",
    "__inheritableKeys",
    "type",
    "clazz",
    "prototype",
    "$$clazz",
    "target",
    "source",
    "id",
    "base",
    "Error",
    "__allowedKeys",
    "__metaKeys",
    "allowed",
    "key",
    "maps",
    "Array",
    "RegExp",
    "Date",
    "classname",
    "counter",
    "meta",
    "value",
    "mixinTheme",
    "__checkForInvalidTheme",
    "errorObj",
    "stackTrace",
    "dev",
    "StackTrace",
    "getStackTraceFromError",
    "error",
    "Theme"
  ],
  "mappings": ";;;;;;;;;;;;AAAAA,EAAAA,EAAE,CAACC,SAAH,CAAaC,oBAAb,CAAkCC,aAAlC;;AAAA;;;;;;;;;;;;;;;;;;;AAmBA;;;;;;;;;;;;AAYAH,EAAAA,EAAE,CAACC,SAAH,CAAaG,MAAb,CAAoB,UAApB,EACA;AACEC,IAAAA,OAAO,EACP;AACE;;;;;;AAMA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BAD,MAAAA,MAAM,EAAG,gBAASE,IAAT,EAAeC,MAAf,EACT;AACE,YAAI,CAACA,MAAL,EAAa;AACX,cAAIA,MAAM,GAAG,EAAb;AACD;;AAEDA,QAAAA,MAAM,CAACC,OAAP,GAAiB,KAAKC,gBAAL,CAAsBF,MAAM,CAACC,OAA7B,CAAjB;AACAD,QAAAA,MAAM,CAACG,KAAP,GAAe,KAAKD,gBAAL,CAAsBF,MAAM,CAACG,KAA7B,CAAf,CANF,CAQE;;AACyC;AACvC,eAAKC,gBAAL,CAAsBL,IAAtB,EAA4BC,MAA5B;AACD,SAXH,CAaE;;AACA,YAAIK,KAAK,GACT;AACEC,UAAAA,MAAM,EAAG,OADX;AAEEP,UAAAA,IAAI,EAAGA,IAFT;AAGEQ,UAAAA,KAAK,EAAGP,MAAM,CAACO,KAHjB;AAKE;AACAC,UAAAA,QAAQ,EAAG,KAAKC;AANlB,SADA,CAdF,CAwBE;;AACA,YAAIT,MAAM,CAACU,MAAX,EAAmB;AACjBL,UAAAA,KAAK,CAACM,UAAN,GAAmBX,MAAM,CAACU,MAA1B;AACD,SA3BH,CA6BE;;;AACAL,QAAAA,KAAK,CAACO,QAAN,GAAiBnB,EAAE,CAACC,SAAH,CAAamB,eAAb,CAA6Bd,IAA7B,EAAmCM,KAAnC,CAAjB,CA9BF,CAgCE;;AACA,aAAKS,SAAL,CAAeT,KAAf,EAAsBL,MAAtB;;AAEA,aAAKe,mBAAL,CAAyBV,KAAzB,EAAgCL,MAAhC,EAnCF,CAqCE;;;AACA,aAAKgB,UAAL,CAAgBjB,IAAhB,IAAwBM,KAAxB,CAtCF,CAwCE;;AACA,aAAK,IAAIY,CAAC,GAAC,CAAN,EAASC,CAAC,GAAClB,MAAM,CAACC,OAAlB,EAA2BkB,CAAC,GAACD,CAAC,CAACE,MAApC,EAA4CH,CAAC,GAACE,CAA9C,EAAiDF,CAAC,EAAlD,EAAsD;AACpD,eAAKhB,OAAL,CAAaI,KAAb,EAAoBa,CAAC,CAACD,CAAD,CAArB;AACD;;AAED,aAAK,IAAIA,CAAC,GAAC,CAAN,EAASC,CAAC,GAAClB,MAAM,CAACG,KAAlB,EAAyBgB,CAAC,GAACD,CAAC,CAACE,MAAlC,EAA0CH,CAAC,GAACE,CAA5C,EAA+CF,CAAC,EAAhD,EAAoD;AAClD,eAAKd,KAAL,CAAWE,KAAX,EAAkBa,CAAC,CAACD,CAAD,CAAnB;AACD,SA/CH,CAiDE;;;AACA,YAAIjB,MAAM,CAACqB,IAAX,EAAiB;AAChBrB,UAAAA,MAAM,CAACqB,IAAP;AACA;AACF,OA3FH;;AA6FE;;;;;;;;;AASAnB,MAAAA,gBAAgB,EAAG,0BAASoB,aAAT,EACnB;AACE,YAAI,CAACA,aAAL,EAAoB;AAClB,iBAAO,EAAP;AACD;;AAED,YAAI7B,EAAE,CAACC,SAAH,CAAa6B,OAAb,CAAqBD,aAArB,CAAJ,EAAyC;AACvC,iBAAOA,aAAP;AACD,SAFD,MAEO;AACL,iBAAO,CAACA,aAAD,CAAP;AACD;AACF,OAjHH;;AAoHE;;;;;;AAMAP,MAAAA,mBAAmB,EAAG,6BAASV,KAAT,EAAgBL,MAAhB,EACtB;AACE,YAAIwB,OAAO,GAAGxB,MAAM,CAACwB,OAAP,IAAkB,EAAhC;;AACA,YAAIxB,MAAM,CAACU,MAAP,IAAiBV,MAAM,CAACU,MAAP,CAAcc,OAAnC,EAA4C;AAC1C/B,UAAAA,EAAE,CAACC,SAAH,CAAa+B,eAAb,CAA6BD,OAA7B,EAAsCxB,MAAM,CAACU,MAAP,CAAcc,OAApD,EAA6D,KAA7D;AACD;;AAEDnB,QAAAA,KAAK,CAACmB,OAAN,GAAgBA,OAAhB;AACD,OAlIH;;AAqIE;;;;;AAKAE,MAAAA,MAAM,EAAG,kBAAW;AAClB,eAAO,KAAKV,UAAZ;AACD,OA5IH;;AA+IE;;;;;;AAMAW,MAAAA,SAAS,EAAG,mBAAS5B,IAAT,EAAe;AACzB,eAAO,KAAKiB,UAAL,CAAgBjB,IAAhB,CAAP;AACD,OAvJH;;AA0JE;;;;;;AAMA6B,MAAAA,SAAS,EAAG,mBAAS7B,IAAT,EAAe;AACzB,eAAO,KAAK4B,SAAL,CAAe5B,IAAf,MAAyB8B,SAAhC;AACD,OAlKH;;AAqKE;;;;;AAKAC,MAAAA,cAAc,EAAG,0BAAW;AAC1B,eAAOrC,EAAE,CAACC,SAAH,CAAaqC,eAAb,CAA6B,KAAKf,UAAlC,CAAP;AACD,OA5KH;;AAiLE;;;;;;AAMA;;;;;;;AAOAP,MAAAA,eAAe,EAAG,2BAAW;AAC3B,eAAO,YAAY,KAAKV,IAAjB,GAAwB,GAA/B;AACD,OAhMH;;AAmME;;;;;;AAMAiC,MAAAA,aAAa,EAAG,uBAAShC,MAAT,EAChB;AACE,aAAK,IAAIiB,CAAC,GAAC,CAAN,EAASgB,IAAI,GAAC,KAAKC,iBAAnB,EAAsCf,CAAC,GAACc,IAAI,CAACb,MAAlD,EAA0DH,CAAC,GAACE,CAA5D,EAA+DF,CAAC,EAAhE,EACA;AACE,cAAIjB,MAAM,CAACiC,IAAI,CAAChB,CAAD,CAAL,CAAV,EAAqB;AACnB,mBAAOgB,IAAI,CAAChB,CAAD,CAAX;AACD;AACF;AACF,OAjNH;;AAoNE;;;;;;AAMAH,MAAAA,SAAS,EAAG,mBAAST,KAAT,EAAgBL,MAAhB,EACZ;AACE,YAAImC,IAAI,GAAG,KAAKH,aAAL,CAAmBhC,MAAnB,CAAX,CADF,CAGE;;;AACA,YAAIA,MAAM,CAACU,MAAP,IAAiB,CAACyB,IAAtB,EAA4B;AAC1BA,UAAAA,IAAI,GAAGnC,MAAM,CAACU,MAAP,CAAcyB,IAArB;AACD,SANH,CAQE;;;AACA9B,QAAAA,KAAK,CAAC8B,IAAN,GAAaA,IAAI,IAAI,OAArB,CATF,CAWE;;AACA,YAAIC,KAAK,GAAG,SAARA,KAAQ,GAAW,CAAE,CAAzB,CAZF,CAcE;;;AACA,YAAIpC,MAAM,CAACU,MAAX,EAAmB;AACjB0B,UAAAA,KAAK,CAACC,SAAN,GAAkB,IAAIrC,MAAM,CAACU,MAAP,CAAc4B,OAAlB,EAAlB;AACD;;AAED,YAAIC,MAAM,GAAGH,KAAK,CAACC,SAAnB;AACA,YAAIG,MAAM,GAAGxC,MAAM,CAACmC,IAAD,CAAnB,CApBF,CAsBE;;AACA,aAAK,IAAIM,EAAT,IAAeD,MAAf,EACA;AACED,UAAAA,MAAM,CAACE,EAAD,CAAN,GAAaD,MAAM,CAACC,EAAD,CAAnB,CADF,CAGE;AACA;;AACA,cAAIF,MAAM,CAACE,EAAD,CAAN,CAAWC,IAAf,EACA;AAEE;AACE,kBAAI,CAAC1C,MAAM,CAACU,MAAZ,EAAoB;AAClB,sBAAM,IAAIiC,KAAJ,CAAU,+BAA+BF,EAA/B,GAAoC,cAApC,GAAqDzC,MAAM,CAACD,IAA5D,GAAmE,uEAA7E,CAAN;AACD;AACF;AAEDwC,YAAAA,MAAM,CAACE,EAAD,CAAN,CAAWC,IAAX,GAAkB1C,MAAM,CAACU,MAAzB;AACD;AACF,SAxCH,CA0CE;;;AACAL,QAAAA,KAAK,CAACiC,OAAN,GAAgBF,KAAhB,CA3CF,CA6CE;;AACA/B,QAAAA,KAAK,CAAC8B,IAAD,CAAL,GAAc,IAAIC,KAAJ,EAAd;AACD,OA1QH;;AA6QE;AACApB,MAAAA,UAAU,EAAG,EA9Qf;;AAiRE;AACAkB,MAAAA,iBAAiB,EAAG,CAAE,QAAF,EAAY,SAAZ,EAAuB,aAAvB,EAAsC,OAAtC,EAA+C,OAA/C,EAAwD,SAAxD,EAAmE,aAAnE,EAAkF,MAAlF,CAlRtB;;AAqRE;AACAU,MAAAA,aAAa,EAGX;AACE,iBAAgB,QADlB;AAC4B;AAC1B,mBAAgB,QAFlB;AAE4B;AAC1B,gBAAgB,QAHlB;AAG4B;AAC1B,kBAAgB,QAJlB;AAI4B;AAC1B,kBAAgB,QALlB;AAK4B;AAC1B,mBAAgB,QANlB;AAM4B;AAC1B,uBAAgB,QAPlB;AAO4B;AAC1B,iBAAgB,QARlB;AAQ4B;AAC1B,iBAAgB,QATlB;AAS4B;AAC1B,mBAAgB,QAVlB;AAU4B;AAC1B,uBAAgB,QAXlB;AAW4B;AAC1B,gBAAgB,QAZlB;AAY4B;AAC1B,mBAAgB,QAblB;AAa4B;AAC1B,iBAAgB,QAdlB;AAc4B;AAC1B,gBAAgB,UAflB,CAe6B;;AAf7B,OAzRJ;;AA8SE;AACAC,MAAAA,UAAU,EAGR;AACE,iBAAU,QADZ;AAEE,kBAAW,QAFb;AAGE,sBAAe,QAHjB;AAIE,gBAAS,QAJX;AAKE,gBAAS,QALX;AAME,sBAAe,QANjB;AAOE,kBAAW;AAPb,OAlTJ;;AA+TE;;;;;;;;AAQAzC,MAAAA,gBAAgB,EAEN,0BAASL,IAAT,EAAeC,MAAf,EACR;AACE,YAAI8C,OAAO,GAAG,KAAKF,aAAnB;;AACA,aAAK,IAAIG,GAAT,IAAgB/C,MAAhB,EACA;AACE,cAAI8C,OAAO,CAACC,GAAD,CAAP,KAAiBlB,SAArB,EAAgC;AAC9B,kBAAM,IAAIc,KAAJ,CAAU,4BAA4BI,GAA5B,GAAkC,cAAlC,GAAmDhD,IAAnD,GAA0D,mBAApE,CAAN;AACD;;AAED,cAAIC,MAAM,CAAC+C,GAAD,CAAN,IAAe,IAAnB,EAAyB;AACvB,kBAAM,IAAIJ,KAAJ,CAAU,kBAAkBI,GAAlB,GAAwB,cAAxB,GAAyChD,IAAzC,GAAgD,iCAA1D,CAAN;AACD;;AAED,cAAI+C,OAAO,CAACC,GAAD,CAAP,KAAiB,IAAjB,IAAyB,QAAO/C,MAAM,CAAC+C,GAAD,CAAb,MAAuBD,OAAO,CAACC,GAAD,CAA3D,EAAkE;AAChE,kBAAM,IAAIJ,KAAJ,CAAU,0BAA0BI,GAA1B,GAAgC,cAAhC,GAAiDhD,IAAjD,GAAwD,kCAAxD,GAA6F+C,OAAO,CAACC,GAAD,CAApG,GAA4G,IAAtH,CAAN;AACD;AACF,SAfH,CAiBE;;;AACA,YAAIC,IAAI,GAAG,CAAE,QAAF,EAAY,SAAZ,EAAuB,aAAvB,EAAsC,OAAtC,EAA+C,OAA/C,EAAwD,SAAxD,EAAmE,aAAnE,EAAkF,MAAlF,CAAX;;AACA,aAAK,IAAI/B,CAAC,GAAC,CAAN,EAASE,CAAC,GAAC6B,IAAI,CAAC5B,MAArB,EAA6BH,CAAC,GAACE,CAA/B,EAAkCF,CAAC,EAAnC,EACA;AACE,cAAI8B,GAAG,GAAGC,IAAI,CAAC/B,CAAD,CAAd;;AAEA,cAAIjB,MAAM,CAAC+C,GAAD,CAAN,KAAgBlB,SAAhB,KAA8B7B,MAAM,CAAC+C,GAAD,CAAN,YAAuBE,KAAvB,IAAgCjD,MAAM,CAAC+C,GAAD,CAAN,YAAuBG,MAAvD,IAAiElD,MAAM,CAAC+C,GAAD,CAAN,YAAuBI,IAAxF,IAAgGnD,MAAM,CAAC+C,GAAD,CAAN,CAAYK,SAAZ,KAA0BvB,SAAxJ,CAAJ,EAAwK;AACtK,kBAAM,IAAIc,KAAJ,CAAU,kBAAkBI,GAAlB,GAAwB,cAAxB,GAAyChD,IAAzC,GAAgD,iCAA1D,CAAN;AACD;AACF,SA1BH,CA4BE;;;AACA,YAAIsD,OAAO,GAAG,CAAd;;AACA,aAAK,IAAIpC,CAAC,GAAC,CAAN,EAASE,CAAC,GAAC6B,IAAI,CAAC5B,MAArB,EAA6BH,CAAC,GAACE,CAA/B,EAAkCF,CAAC,EAAnC,EACA;AACE,cAAI8B,GAAG,GAAGC,IAAI,CAAC/B,CAAD,CAAd;;AAEA,cAAIjB,MAAM,CAAC+C,GAAD,CAAV,EAAiB;AACfM,YAAAA,OAAO;AACR;;AAED,cAAIA,OAAO,GAAG,CAAd,EAAiB;AACf,kBAAM,IAAIV,KAAJ,CAAU,qEAAqE5C,IAA/E,CAAN;AACD;AACF,SAzCH,CA2CE;;;AACA,YAAIC,MAAM,CAACsD,IAAX,EACA;AACE,cAAIC,KAAJ;;AACA,eAAK,IAAIR,GAAT,IAAgB/C,MAAM,CAACsD,IAAvB,EACA;AACEC,YAAAA,KAAK,GAAGvD,MAAM,CAACsD,IAAP,CAAYP,GAAZ,CAAR;;AAEA,gBAAI,KAAKF,UAAL,CAAgBE,GAAhB,MAAyBlB,SAA7B,EAAwC;AACtC,oBAAM,IAAIc,KAAJ,CAAU,cAAcI,GAAd,GAAoB,6CAA9B,CAAN;AACD;;AAED,gBAAI,QAAOQ,KAAP,MAAiB,KAAKV,UAAL,CAAgBE,GAAhB,CAArB,EAA2C;AACzC,oBAAM,IAAIJ,KAAJ,CAAU,0BAA0BI,GAA1B,GAAgC,mCAA1C,CAAN;AACD;;AAED,gBAAI,EAAE,QAAOQ,KAAP,MAAiB,QAAjB,IAA6BA,KAAK,KAAK,IAAvC,IAA+CA,KAAK,CAACjD,MAAN,KAAiB,OAAlE,CAAJ,EAAgF;AAC9E,oBAAM,IAAIqC,KAAJ,CAAU,gFAAgFI,GAAhF,GAAsF,cAAtF,GAAuGhD,IAAvG,GAA8G,gBAA9G,GAAiIwD,KAA3I,CAAN;AACD;AACF;AACF,SA/DH,CAiEE;;;AACA,YAAIvD,MAAM,CAACU,MAAP,IAAiBV,MAAM,CAACU,MAAP,CAAcJ,MAAd,KAAyB,OAA9C,EAAuD;AACrD,gBAAM,IAAIqC,KAAJ,CAAU,8BAA8B5C,IAA9B,GAAqC,KAArC,GAA6CC,MAAM,CAACU,MAA9D,CAAN;AACD,SApEH,CAsEE;;;AACA,YAAIV,MAAM,CAACC,OAAX,EAAoB;AAClB,eAAK,IAAIgB,CAAC,GAAC,CAAN,EAAQE,CAAC,GAACnB,MAAM,CAACC,OAAP,CAAemB,MAA9B,EAAsCH,CAAC,GAACE,CAAxC,EAA2CF,CAAC,EAA5C,EAAgD;AAC9C,gBAAI,OAAOjB,MAAM,CAACC,OAAP,CAAegB,CAAf,CAAP,IAA6B,WAA7B,IAA4CjB,MAAM,CAACC,OAAP,CAAegB,CAAf,EAAkBX,MAAlB,KAA6B,OAA7E,EAAsF;AACpF,oBAAM,IAAIqC,KAAJ,CAAU,+BAA+B5C,IAA/B,GAAsC,KAAtC,GAA8CC,MAAM,CAACC,OAAP,CAAegB,CAAf,CAAxD,CAAN;AACD;AACF;AACF,SA7EH,CA+EE;;;AACA,YAAIjB,MAAM,CAACG,KAAX,EAAkB;AAChB,eAAK,IAAIc,CAAC,GAAC,CAAN,EAAQE,CAAC,GAACnB,MAAM,CAACG,KAAP,CAAaiB,MAA5B,EAAoCH,CAAC,GAACE,CAAtC,EAAyCF,CAAC,EAA1C,EAA8C;AAC5C,gBAAI,OAAOjB,MAAM,CAACG,KAAP,CAAac,CAAb,CAAP,KAA4B,WAA5B,IAA2CjB,MAAM,CAACG,KAAP,CAAac,CAAb,EAAgBX,MAAhB,KAA2B,OAA1E,EAAmF;AACjF,oBAAM,IAAIqC,KAAJ,CAAU,6BAA6B5C,IAA7B,GAAoC,KAApC,GAA4CC,MAAM,CAACG,KAAP,CAAac,CAAb,CAAtD,CAAN;AACD;AACF;AACF;AACF,OAjaL;;AAuaE;;;;;;;;AAQAd,MAAAA,KAAK,EAAG,eAASE,KAAT,EAAgBmD,UAAhB,EACR;AACE,aAAKC,sBAAL,CAA4BD,UAA5B;;AAEA,YAAIrB,IAAI,GAAG,KAAKH,aAAL,CAAmBwB,UAAnB,CAAX;;AACA,YAAIrB,IAAI,KAAK,KAAKH,aAAL,CAAmB3B,KAAnB,CAAb,EAAwC;AACtC,gBAAM,IAAIsC,KAAJ,CAAU,iBAAiBtC,KAAK,CAACN,IAAvB,GAA8B,wBAA9B,GAAyDyD,UAAU,CAACzD,IAApE,GAA2E,IAArF,CAAN;AACD;;AAED,YAAIyC,MAAM,GAAGgB,UAAU,CAACrB,IAAD,CAAvB;AACA,YAAII,MAAM,GAAGlC,KAAK,CAACiC,OAAN,CAAcD,SAA3B;;AAEA,aAAK,IAAIU,GAAT,IAAgBP,MAAhB,EAAwB;AACtBD,UAAAA,MAAM,CAACQ,GAAD,CAAN,GAAcP,MAAM,CAACO,GAAD,CAApB;AACD;AACF,OA9bH;;AAicE;;;;;;;;;AASA9C,MAAAA,OAAO,EAAG,iBAASI,KAAT,EAAgBmD,UAAhB,EACV;AACE,aAAKC,sBAAL,CAA4BD,UAA5B;;AAEA,YAAIrB,IAAI,GAAGqB,UAAU,CAACrB,IAAtB;;AACA,YAAIA,IAAI,KAAK9B,KAAK,CAAC8B,IAAnB,EAAyB;AACvB,gBAAM,IAAIQ,KAAJ,CAAU,iBAAiBtC,KAAK,CAACN,IAAvB,GAA8B,wBAA9B,GAAyDyD,UAAU,CAACzD,IAApE,GAA2E,IAArF,CAAN;AACD;;AAED,YAAIyC,MAAM,GAAGgB,UAAU,CAACrB,IAAD,CAAvB;AACA,YAAII,MAAM,GAAGlC,KAAK,CAACiC,OAAN,CAAcD,SAA3B;;AAEA,aAAK,IAAIU,GAAT,IAAgBP,MAAhB,EACA;AACE;AACA,cAAID,MAAM,CAACQ,GAAD,CAAN,KAAgBlB,SAApB,EAA+B;AAC7B;AACD;;AAEDU,UAAAA,MAAM,CAACQ,GAAD,CAAN,GAAcP,MAAM,CAACO,GAAD,CAApB;AACD;AACF,OA/dH;;AAieE;;;;;;AAMAU,MAAAA,sBAAsB,EAAE,gCAASD,UAAT,EACxB;AACE,YAAI,OAAOA,UAAP,KAAsB,WAAtB,IAAqCA,UAAU,IAAI,IAAvD,EACA;AACE,cAAIE,QAAQ,GAAG,IAAIf,KAAJ,CAAU,mCAAV,CAAf;AAEyC;AACvC,gBAAIgB,UAAU,GAAGlE,EAAE,CAACmE,GAAH,CAAOC,UAAP,CAAkBC,sBAAlB,CAAyCJ,QAAzC,CAAjB;AACAjE,YAAAA,EAAE,CAACC,SAAH,CAAaqE,KAAb,CAAmB,IAAnB,EAAyBJ,UAAzB;AACD;AAED,gBAAMD,QAAN;AACD;AACF;AApfH;AAFF,GADA;AA/BAjE,EAAAA,EAAE,CAACuE,KAAH,CAASpE,aAAT,GAAyBA,aAAzB",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2008 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Sebastian Werner (wpbasti)\n     * Andreas Ecker (ecker)\n\n************************************************************************ */\n\n/**\n * Theme classes contain styling information for certain aspects of the\n * graphical user interface.\n *\n * Supported themes are: colors, decorations, fonts, icons, appearances.\n * The additional meta theme allows for grouping of the individual\n * themes.\n *\n * For more details, take a look at the\n * <a href='http://manual.qooxdoo.org/${qxversion}/pages/desktop/ui_theming.html' target='_blank'>\n * documentation of the theme system in the qooxdoo manual.</a>\n */\nqx.Bootstrap.define(\"qx.Theme\",\n{\n  statics:\n  {\n    /*\n    ---------------------------------------------------------------------------\n       PUBLIC API\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Theme config\n     *\n     * Example:\n     * <pre class='javascript'>\n     * qx.Theme.define(\"name\",\n     * {\n     *   aliases : {\n     *     \"aliasKey\" : \"resourceFolderOrUri\"\n     *   },\n     *   extend : otherTheme,\n     *   include : [MMixinTheme],\n     *   patch : [MMixinTheme],\n     *   colors : {},\n     *   decorations : {},\n     *   fonts : {},\n     *   widgets : {},\n     *   appearances : {},\n     *   meta : {},\n     *   boot : function(){}\n     * });\n     * </pre>\n     *\n     * For more details, take a look at the\n     * <a href='http://manual.qooxdoo.org/${qxversion}/pages/desktop/ui_theming.html' target='_blank'>\n     * documentation of the theme system in the qooxdoo manual.</a>\n     *\n     * @param name {String} name of the mixin\n     * @param config {Map} config structure\n     */\n    define : function(name, config)\n    {\n      if (!config) {\n        var config = {};\n      }\n\n      config.include = this.__normalizeArray(config.include);\n      config.patch = this.__normalizeArray(config.patch);\n\n      // Validate incoming data\n      if (qx.core.Environment.get(\"qx.debug\")) {\n        this.__validateConfig(name, config);\n      }\n\n      // Create alias\n      var theme =\n      {\n        $$type : \"Theme\",\n        name : name,\n        title : config.title,\n\n        // Attach toString\n        toString : this.genericToString\n      };\n\n      // Remember extend\n      if (config.extend) {\n        theme.supertheme = config.extend;\n      }\n\n      // Assign to namespace\n      theme.basename = qx.Bootstrap.createNamespace(name, theme);\n\n      // Convert theme entry from Object to Function (for prototype inheritance)\n      this.__convert(theme, config);\n\n      this.__initializeAliases(theme, config);\n\n      // Store class reference in global class registry\n      this.$$registry[name] = theme;\n\n      // Include mixin themes\n      for (var i=0, a=config.include, l=a.length; i<l; i++) {\n        this.include(theme, a[i]);\n      }\n\n      for (var i=0, a=config.patch, l=a.length; i<l; i++) {\n        this.patch(theme, a[i]);\n      }\n      \n      // Run boot code\n      if (config.boot) {\n      \tconfig.boot();\n      }\n    },\n\n    /**\n     * Normalize an object to an array\n     *\n     * @param objectOrArray {Object|Array} Either an object that is to be\n     *   normalized to an array, or an array, which is just passed through\n     *\n     * @return {Array} Either an array that has the original object as its\n     *   single item, or the original array itself\n     */\n    __normalizeArray : function(objectOrArray)\n    {\n      if (!objectOrArray) {\n        return [];\n      }\n\n      if (qx.Bootstrap.isArray(objectOrArray)) {\n        return objectOrArray;\n      } else {\n        return [objectOrArray];\n      }\n    },\n\n\n    /**\n     * Initialize alias inheritance\n     *\n     * @param theme {Map} The theme\n     * @param config {Map} config structure\n     */\n    __initializeAliases : function(theme, config)\n    {\n      var aliases = config.aliases || {};\n      if (config.extend && config.extend.aliases) {\n        qx.Bootstrap.objectMergeWith(aliases, config.extend.aliases, false);\n      }\n\n      theme.aliases = aliases;\n    },\n\n\n    /**\n     * Return a map of all known themes\n     *\n     * @return {Map} known themes\n     */\n    getAll : function() {\n      return this.$$registry;\n    },\n\n\n    /**\n     * Returns a theme by name\n     *\n     * @param name {String} theme name to check\n     * @return {Object ? void} theme object\n     */\n    getByName : function(name) {\n      return this.$$registry[name];\n    },\n\n\n    /**\n     * Determine if theme exists\n     *\n     * @param name {String} theme name to check\n     * @return {Boolean} true if theme exists\n     */\n    isDefined : function(name) {\n      return this.getByName(name) !== undefined;\n    },\n\n\n    /**\n     * Determine the number of themes which are defined\n     *\n     * @return {Number} the number of classes\n     */\n    getTotalNumber : function() {\n      return qx.Bootstrap.objectGetLength(this.$$registry);\n    },\n\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n       PRIVATE/INTERNAL API\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * This method will be attached to all themes to return\n     * a nice identifier for them.\n     *\n     * @internal\n     * @return {String} The interface identifier\n     */\n    genericToString : function() {\n      return \"[Theme \" + this.name + \"]\";\n    },\n\n\n    /**\n     * Extract the inheritable key (could be only one)\n     *\n     * @param config {Map} The map from where to extract the key\n     * @return {String} the key which was found\n     */\n    __extractType : function(config)\n    {\n      for (var i=0, keys=this.__inheritableKeys, l=keys.length; i<l; i++)\n      {\n        if (config[keys[i]]) {\n          return keys[i];\n        }\n      }\n    },\n\n\n    /**\n     * Convert existing entry to a prototype based inheritance function\n     *\n     * @param theme {Theme} newly created theme object\n     * @param config {Map} incoming theme configuration\n     */\n    __convert : function(theme, config)\n    {\n      var type = this.__extractType(config);\n\n      // Use theme key from extended theme if own one is not available\n      if (config.extend && !type) {\n        type = config.extend.type;\n      }\n\n      // Save theme type\n      theme.type = type || \"other\";\n\n      // Create pseudo class\n      var clazz = function() {};\n\n      // Process extend config\n      if (config.extend) {\n        clazz.prototype = new config.extend.$$clazz;\n      }\n\n      var target = clazz.prototype;\n      var source = config[type];\n\n      // Copy entries to prototype\n      for (var id in source)\n      {\n        target[id] = source[id];\n\n        // Appearance themes only:\n        // Convert base flag to class reference (needed for mixin support)\n        if (target[id].base)\n        {\n          if (qx.core.Environment.get(\"qx.debug\"))\n          {\n            if (!config.extend) {\n              throw new Error(\"Found base flag in entry '\" + id + \"' of theme '\" + config.name + \"'. Base flags are not allowed for themes without a valid super theme!\");\n            }\n          }\n\n          target[id].base = config.extend;\n        }\n      }\n\n      // store pseudo class\n      theme.$$clazz = clazz;\n\n      // and create instance under the old key\n      theme[type] = new clazz;\n    },\n\n\n    /** @type {Map} Internal theme registry */\n    $$registry : {},\n\n\n    /** @type {Array} Keys which support inheritance */\n    __inheritableKeys : [ \"colors\", \"borders\", \"decorations\", \"fonts\", \"icons\", \"widgets\", \"appearances\", \"meta\" ],\n\n\n    /** @type {Map} allowed keys in theme definition */\n    __allowedKeys : qx.core.Environment.select(\"qx.debug\",\n    {\n      \"true\":\n      {\n        \"title\"       : \"string\", // String\n        \"aliases\"     : \"object\", // Map\n        \"type\"        : \"string\", // String\n        \"extend\"      : \"object\", // Theme\n        \"colors\"      : \"object\", // Map\n        \"borders\"     : \"object\", // Map\n        \"decorations\" : \"object\", // Map\n        \"fonts\"       : \"object\", // Map\n        \"icons\"       : \"object\", // Map\n        \"widgets\"     : \"object\", // Map\n        \"appearances\" : \"object\", // Map\n        \"meta\"        : \"object\", // Map\n        \"include\"     : \"object\", // Array\n        \"patch\"       : \"object\", // Array\n        \"boot\"        : \"function\" // Function\n      },\n\n      \"default\" : null\n    }),\n\n    /** @type {Map} allowed keys inside a meta theme block */\n    __metaKeys :qx.core.Environment.select(\"qx.debug\",\n    {\n      \"true\":\n      {\n        \"color\" : \"object\",\n        \"border\" : \"object\",\n        \"decoration\" : \"object\",\n        \"font\" : \"object\",\n        \"icon\" : \"object\",\n        \"appearance\" : \"object\",\n        \"widget\" : \"object\"\n      },\n\n      \"default\" : null\n    }),\n\n    /**\n     * Validates incoming configuration and checks keys and values\n     *\n     * @signature function(name, config)\n     * @param name {String} The name of the class\n     * @param config {Map} Configuration map\n     * @throws {Error} if the given config is not valid (e.g. wrong key or wrong key value)\n     */\n    __validateConfig : qx.core.Environment.select(\"qx.debug\",\n    {\n      \"true\": function(name, config)\n      {\n        var allowed = this.__allowedKeys;\n        for (var key in config)\n        {\n          if (allowed[key] === undefined) {\n            throw new Error('The configuration key \"' + key + '\" in theme \"' + name + '\" is not allowed!');\n          }\n\n          if (config[key] == null) {\n            throw new Error('Invalid key \"' + key + '\" in theme \"' + name + '\"! The value is undefined/null!');\n          }\n\n          if (allowed[key] !== null && typeof config[key] !== allowed[key]) {\n            throw new Error('Invalid type of key \"' + key + '\" in theme \"' + name + '\"! The type of the key must be \"' + allowed[key] + '\"!');\n          }\n        }\n\n        // Validate maps\n        var maps = [ \"colors\", \"borders\", \"decorations\", \"fonts\", \"icons\", \"widgets\", \"appearances\", \"meta\" ];\n        for (var i=0, l=maps.length; i<l; i++)\n        {\n          var key = maps[i];\n\n          if (config[key] !== undefined && (config[key] instanceof Array || config[key] instanceof RegExp || config[key] instanceof Date || config[key].classname !== undefined)) {\n            throw new Error('Invalid key \"' + key + '\" in theme \"' + name + '\"! The value needs to be a map!');\n          }\n        }\n\n        // Check conflicts (detect number ...)\n        var counter = 0;\n        for (var i=0, l=maps.length; i<l; i++)\n        {\n          var key = maps[i];\n\n          if (config[key]) {\n            counter++;\n          }\n\n          if (counter > 1) {\n            throw new Error(\"You can only define one theme category per file! Invalid theme: \" + name);\n          }\n        }\n\n        // Validate meta\n        if (config.meta)\n        {\n          var value;\n          for (var key in config.meta)\n          {\n            value = config.meta[key];\n\n            if (this.__metaKeys[key] === undefined) {\n              throw new Error('The key \"' + key + '\" is not allowed inside a meta theme block.');\n            }\n\n            if (typeof value !== this.__metaKeys[key]) {\n              throw new Error('The type of the key \"' + key + '\" inside the meta block is wrong.');\n            }\n\n            if (!(typeof value === \"object\" && value !== null && value.$$type === \"Theme\")) {\n              throw new Error('The content of a meta theme must reference to other themes. The value for \"' + key + '\" in theme \"' + name + '\" is invalid: ' + value);\n            }\n          }\n        }\n\n        // Validate extend\n        if (config.extend && config.extend.$$type !== \"Theme\") {\n          throw new Error('Invalid extend in theme \"' + name + '\": ' + config.extend);\n        }\n\n        // Validate include\n        if (config.include) {\n          for (var i=0,l=config.include.length; i<l; i++) {\n            if (typeof(config.include[i]) == \"undefined\" || config.include[i].$$type !== \"Theme\") {\n              throw new Error('Invalid include in theme \"' + name + '\": ' + config.include[i]);\n            }\n          }\n        }\n\n        // Validate patch\n        if (config.patch) {\n          for (var i=0,l=config.patch.length; i<l; i++) {\n            if (typeof(config.patch[i]) === \"undefined\" || config.patch[i].$$type !== \"Theme\") {\n              throw new Error('Invalid patch in theme \"' + name + '\": ' + config.patch[i]);\n            }\n          }\n        }\n      },\n\n      \"default\" : function() {}\n    }),\n\n\n    /**\n     * Include all keys of the given mixin theme into the theme. The mixin may\n     * include keys which are already defined in the target theme. Existing\n     * features of equal name will be overwritten.\n     *\n     * @param theme {Theme} An existing theme which should be modified by including the mixin theme.\n     * @param mixinTheme {Theme} The theme to be included.\n     */\n    patch : function(theme, mixinTheme)\n    {\n      this.__checkForInvalidTheme(mixinTheme);\n\n      var type = this.__extractType(mixinTheme);\n      if (type !== this.__extractType(theme)) {\n        throw new Error(\"The mixins '\" + theme.name + \"' are not compatible '\" + mixinTheme.name + \"'!\");\n      }\n\n      var source = mixinTheme[type];\n      var target = theme.$$clazz.prototype;\n\n      for (var key in source) {\n        target[key] = source[key];\n      }\n    },\n\n\n    /**\n     * Include all keys of the given mixin theme into the theme. If the\n     * mixin includes any keys that are already available in the\n     * class, they will be silently ignored. Use the {@link #patch} method\n     * if you need to overwrite keys in the current class.\n     *\n     * @param theme {Theme} An existing theme which should be modified by including the mixin theme.\n     * @param mixinTheme {Theme} The theme to be included.\n     */\n    include : function(theme, mixinTheme)\n    {\n      this.__checkForInvalidTheme(mixinTheme);\n\n      var type = mixinTheme.type;\n      if (type !== theme.type) {\n        throw new Error(\"The mixins '\" + theme.name + \"' are not compatible '\" + mixinTheme.name + \"'!\");\n      }\n\n      var source = mixinTheme[type];\n      var target = theme.$$clazz.prototype;\n\n      for (var key in source)\n      {\n        //Skip keys already present\n        if (target[key] !== undefined) {\n          continue;\n        }\n\n        target[key] = source[key];\n      }\n    },\n\n    /**\n     * Helper method to check for an invalid theme\n     *\n     * @param mixinTheme {qx.Theme?null} theme to check\n     * @throws {Error} if the theme is not valid\n     */\n    __checkForInvalidTheme: function(mixinTheme)\n    {\n      if (typeof mixinTheme === \"undefined\" || mixinTheme == null)\n      {\n        var errorObj = new Error(\"Mixin theme is not a valid theme!\");\n\n        if (qx.core.Environment.get(\"qx.debug\")) {\n          var stackTrace = qx.dev.StackTrace.getStackTraceFromError(errorObj);\n          qx.Bootstrap.error(this, stackTrace);\n        }\n\n        throw errorObj;\n      }\n    }\n  }\n});\n"
  ]
}