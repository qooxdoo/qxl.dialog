{
  "version": 3,
  "sources": [
    "/home/travis/build/qooxdoo/qxl.dialog/node_modules/@qooxdoo/compiler/node_modules/@qooxdoo/framework/source/class/qx/bom/element/AnimationCss.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "define",
    "statics",
    "__sheet",
    "__rulePrefix",
    "__id",
    "__rules",
    "__transitionKeys",
    "__cssAnimationKeys",
    "core",
    "Environment",
    "get",
    "animateReverse",
    "el",
    "desc",
    "duration",
    "_animate",
    "animate",
    "reverse",
    "__normalizeDesc",
    "__validateDesc",
    "keep",
    "alternate",
    "repeat",
    "bom",
    "Stylesheet",
    "createElement",
    "keyFrames",
    "undefined",
    "name",
    "__addKeyFrames",
    "style",
    "timing",
    "delay",
    "Event",
    "addNativeListener",
    "__onAnimationStart",
    "__onAnimationIteration",
    "__onAnimationEnd",
    "element",
    "Style",
    "log",
    "Logger",
    "warn",
    "lang",
    "String",
    "camelCase",
    "animation",
    "AnimationHandle",
    "$$animation",
    "origin",
    "Transform",
    "setOrigin",
    "window",
    "setTimeout",
    "AnimationCss",
    "target",
    "e",
    "emit",
    "key",
    "removeNativeListener",
    "__keepFrame",
    "ended",
    "endFrame",
    "transforms",
    "transform",
    "hasOwnProperty",
    "possibleKeys",
    "indexOf",
    "pos",
    "frames",
    "rule",
    "position",
    "frame",
    "propName",
    "getPropertyName",
    "prefixed",
    "getCssName",
    "getCss",
    "selector",
    "addRule",
    "__clearCache",
    "ownerNode",
    "remove",
    "defer",
    "parseInt",
    "document",
    "addEventListener",
    "hidden"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2011 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Martin Wittemann (martinwittemann)\n\n************************************************************************ */\n\n/**\n * This class is responsible for applying CSS3 animations to plain DOM elements.\n *\n * The implementation is mostly a cross-browser wrapper for applying the\n * animations, including transforms. If the browser does not support\n * CSS animations, but you have set a keep frame, the keep frame will be applied\n * immediately, thus making the animations optional.\n *\n * The API aligns closely to the spec wherever possible.\n *\n * http://www.w3.org/TR/css3-animations/\n *\n * {@link qx.bom.element.Animation} is the class, which takes care of the\n * feature detection for CSS animations and decides which implementation\n * (CSS or JavaScript) should be used. Most likely, this implementation should\n * be the one to use.\n */\nqx.Bootstrap.define(\"qx.bom.element.AnimationCss\",\n{\n  statics : {\n    // initialization\n    __sheet : null,\n    __rulePrefix : \"Anni\",\n    __id : 0,\n    /** Static map of rules */\n    __rules : {},\n\n    /** The used keys for transforms. */\n    __transitionKeys : {\n      \"scale\": true,\n      \"rotate\" : true,\n      \"skew\" : true,\n      \"translate\" : true\n    },\n\n    /** Map of cross browser CSS keys. */\n    __cssAnimationKeys : qx.core.Environment.get(\"css.animation\"),\n\n\n    /**\n     * This is the main function to start the animation in reverse mode.\n     * For further details, take a look at the documentation of the wrapper\n     * {@link qx.bom.element.Animation}.\n     * @param el {Element} The element to animate.\n     * @param desc {Map} Animation description.\n     * @param duration {Integer?} The duration of the animation which will\n     *   override the duration given in the description.\n     * @return {qx.bom.element.AnimationHandle} The handle.\n     */\n    animateReverse : function(el, desc, duration) {\n      return this._animate(el, desc, duration, true);\n    },\n\n    /**\n     * This is the main function to start the animation. For further details,\n     * take a look at the documentation of the wrapper\n     * {@link qx.bom.element.Animation}.\n     * @param el {Element} The element to animate.\n     * @param desc {Map} Animation description.\n     * @param duration {Integer?} The duration of the animation which will\n     *   override the duration given in the description.\n     * @return {qx.bom.element.AnimationHandle} The handle.\n     */\n    animate : function(el, desc, duration) {\n      return this._animate(el, desc, duration, false);\n    },\n\n\n    /**\n     * Internal method to start an animation either reverse or not.\n     * {@link qx.bom.element.Animation}.\n     * @param el {Element} The element to animate.\n     * @param desc {Map} Animation description.\n     * @param duration {Integer?} The duration of the animation which will\n     *   override the duration given in the description.\n     * @param reverse {Boolean} <code>true</code>, if the animation should be\n     *   reversed.\n     * @return {qx.bom.element.AnimationHandle} The handle.\n     */\n    _animate : function(el, desc, duration, reverse) {\n      this.__normalizeDesc(desc);\n\n      // debug validation\n      if (qx.core.Environment.get(\"qx.debug\")) {\n        this.__validateDesc(desc);\n      }\n\n      // reverse the keep property if the animation is reverse as well\n      var keep = desc.keep;\n      if (keep != null && (reverse || (desc.alternate && desc.repeat % 2 == 0))) {\n        keep = 100 - keep;\n      }\n\n      if (!this.__sheet) {\n        this.__sheet = qx.bom.Stylesheet.createElement();\n      }\n      var keyFrames = desc.keyFrames;\n\n      if (duration == undefined) {\n        duration = desc.duration;\n      }\n\n      // if animations are supported\n      if (this.__cssAnimationKeys != null) {\n        var name = this.__addKeyFrames(keyFrames, reverse);\n\n        var style =\n          name + \" \" +\n          duration + \"ms \" +\n          desc.timing + \" \" +\n          (desc.delay ? desc.delay + \"ms \" : \"\") +\n          desc.repeat + \" \" +\n          (desc.alternate ? \"alternate\" : \"\");\n\n        qx.bom.Event.addNativeListener(el, this.__cssAnimationKeys[\"start-event\"], this.__onAnimationStart);\n        qx.bom.Event.addNativeListener(el, this.__cssAnimationKeys[\"iteration-event\"], this.__onAnimationIteration);\n        qx.bom.Event.addNativeListener(el, this.__cssAnimationKeys[\"end-event\"], this.__onAnimationEnd);\n\n        if (qx.core.Environment.get(\"qx.debug\")) {\n          if (qx.bom.element.Style.get(el, \"display\") == \"none\") {\n            qx.log.Logger.warn(el, \"Some browsers will not animate elements with display==none\");\n          }\n        }\n\n        el.style[qx.lang.String.camelCase(this.__cssAnimationKeys[\"name\"])] = style;\n        // use the fill mode property if available and suitable\n        if (keep && keep == 100 && this.__cssAnimationKeys[\"fill-mode\"]) {\n          el.style[this.__cssAnimationKeys[\"fill-mode\"]] = \"forwards\";\n        }\n      }\n\n      var animation = new qx.bom.element.AnimationHandle();\n      animation.desc = desc;\n      animation.el = el;\n      animation.keep = keep;\n      el.$$animation = animation;\n\n      // additional transform keys\n      if (desc.origin != null) {\n        qx.bom.element.Transform.setOrigin(el, desc.origin);\n      }\n\n      // fallback for browsers not supporting animations\n      if (this.__cssAnimationKeys == null) {\n        window.setTimeout(function() {\n          qx.bom.element.AnimationCss.__onAnimationEnd({target: el});\n        }, 0);\n      }\n\n      return animation;\n    },\n\n\n    /**\n     * Handler for the animation start.\n     * @param e {Event} The native event from the browser.\n     */\n    __onAnimationStart : function(e) {\n      if (e.target.$$animation) {\n        e.target.$$animation.emit(\"start\", e.target);\n      }\n    },\n\n\n    /**\n     * Handler for the animation iteration.\n     * @param e {Event} The native event from the browser.\n     */\n    __onAnimationIteration : function(e)\n    {\n      // It could happen that an animation end event is fired before an\n      // animation iteration appears [BUG #6928]\n      if (e.target != null && e.target.$$animation != null) {\n        e.target.$$animation.emit(\"iteration\", e.target);\n      }\n    },\n\n\n    /**\n     * Handler for the animation end.\n     * @param e {Event} The native event from the browser.\n     */\n    __onAnimationEnd : function(e) {\n      var el = e.target;\n      var animation = el.$$animation;\n\n      // ignore events when already cleaned up\n      if (!animation) {\n        return;\n      }\n\n      var desc = animation.desc;\n\n      if (qx.bom.element.AnimationCss.__cssAnimationKeys != null) {\n        // reset the styling\n        var key = qx.lang.String.camelCase(\n          qx.bom.element.AnimationCss.__cssAnimationKeys[\"name\"]\n        );\n        el.style[key] = \"\";\n\n        qx.bom.Event.removeNativeListener(\n          el,\n          qx.bom.element.AnimationCss.__cssAnimationKeys[\"name\"],\n          qx.bom.element.AnimationCss.__onAnimationEnd\n        );\n      }\n\n      if (desc.origin != null) {\n        qx.bom.element.Transform.setOrigin(el, \"\");\n      }\n\n      qx.bom.element.AnimationCss.__keepFrame(el, desc.keyFrames[animation.keep]);\n\n      el.$$animation = null;\n      animation.el = null;\n      animation.ended = true;\n\n      animation.emit(\"end\", el);\n    },\n\n\n    /**\n     * Helper method which takes an element and a key frame description and\n     * applies the properties defined in the given frame to the element. This\n     * method is used to keep the state of the animation.\n     * @param el {Element} The element to apply the frame to.\n     * @param endFrame {Map} The description of the end frame, which is basically\n     *   a map containing CSS properties and values including transforms.\n     */\n    __keepFrame : function(el, endFrame) {\n      // keep the element at this animation step\n      var transforms;\n      for (var style in endFrame) {\n        if (style in qx.bom.element.AnimationCss.__transitionKeys) {\n          if (!transforms) {\n            transforms = {};\n          }\n          transforms[style] = endFrame[style];\n        } else {\n          el.style[qx.lang.String.camelCase(style)] = endFrame[style];\n        }\n      }\n\n      // transform keeping\n      if (transforms) {\n        qx.bom.element.Transform.transform(el, transforms);\n      }\n    },\n\n\n    /**\n     * Preprocessing of the description to make sure every necessary key is\n     * set to its default.\n     * @param desc {Map} The description of the animation.\n     */\n    __normalizeDesc : function(desc) {\n      if (!desc.hasOwnProperty(\"alternate\")) {\n        desc.alternate = false;\n      }\n      if (!desc.hasOwnProperty(\"keep\")) {\n        desc.keep = null;\n      }\n      if (!desc.hasOwnProperty(\"repeat\")) {\n        desc.repeat = 1;\n      }\n      if (!desc.hasOwnProperty(\"timing\")) {\n        desc.timing = \"linear\";\n      }\n      if (!desc.hasOwnProperty(\"origin\")) {\n        desc.origin = null;\n      }\n    },\n\n\n    /**\n     * Debugging helper to validate the description.\n     * @signature function(desc)\n     * @param desc {Map} The description of the animation.\n     */\n    __validateDesc : qx.core.Environment.select(\"qx.debug\", {\n      \"true\" : function(desc) {\n        var possibleKeys = [\n          \"origin\", \"duration\", \"keep\", \"keyFrames\", \"delay\",\n          \"repeat\", \"timing\", \"alternate\"\n        ];\n\n        // check for unknown keys\n        for (var name in desc) {\n          if (!(possibleKeys.indexOf(name) != -1)) {\n            qx.Bootstrap.warn(\"Unknown key '\" + name + \"' in the animation description.\");\n          }\n        };\n\n        if (desc.keyFrames == null) {\n          qx.Bootstrap.warn(\"No 'keyFrames' given > 0\");\n        } else {\n          // check the key frames\n          for (var pos in desc.keyFrames) {\n            if (pos < 0 || pos > 100) {\n              qx.Bootstrap.warn(\"Keyframe position needs to be between 0 and 100\");\n            }\n          }\n        }\n      },\n\n      \"default\" : null\n    }),\n\n\n    /**\n     * Helper to add the given frames to an internal CSS stylesheet. It parses\n     * the description and adds the key frames to the sheet.\n     * @param frames {Map} A map of key frames that describe the animation.\n     * @param reverse {Boolean} <code>true</code>, if the key frames should\n     *   be added in reverse order.\n     * @return {String} The generated name of the keyframes rule.\n     */\n    __addKeyFrames : function(frames, reverse) {\n      var rule = \"\";\n\n      // for each key frame\n      for (var position in frames) {\n        rule += (reverse ? -(position - 100) : position) + \"% {\";\n\n        var frame = frames[position];\n        var transforms;\n        // each style\n        for (var style in frame) {\n          if (style in this.__transitionKeys) {\n            if (!transforms) {\n              transforms = {};\n            }\n            transforms[style] = frame[style];\n          } else {\n            var propName = qx.bom.Style.getPropertyName(style);\n            var prefixed = (propName !== null) ?\n              qx.bom.Style.getCssName(propName) : \"\";\n            rule += (prefixed || style) + \":\" + frame[style] + \";\";\n          }\n        }\n\n        // transform handling\n        if (transforms) {\n          rule += qx.bom.element.Transform.getCss(transforms);\n        }\n\n        rule += \"} \";\n      }\n\n      // cached shorthand\n      if (this.__rules[rule]) {\n        return this.__rules[rule];\n      }\n\n      var name = this.__rulePrefix + this.__id++;\n      var selector = this.__cssAnimationKeys[\"keyframes\"] + \" \" + name;\n      qx.bom.Stylesheet.addRule(this.__sheet, selector, rule);\n\n      this.__rules[rule] = name;\n\n      return name;\n    },\n\n\n    /**\n     * Internal helper to reset the cache.\n     */\n    __clearCache: function() {\n      this.__id = 0;\n      if (this.__sheet) {\n        this.__sheet.ownerNode.remove();\n        this.__sheet = null;\n        this.__rules = {};\n      }\n    }\n  },\n\n\n  defer : function(statics) {\n    // iOS 8 seems to stumble over the old sheet object on tab\n    // changes or leaving the browser [BUG #8986]\n    if (qx.core.Environment.get(\"os.name\") === \"ios\" &&\n      parseInt(qx.core.Environment.get(\"os.version\")) >= 8\n    ) {\n      document.addEventListener(\"visibilitychange\", function() {\n        if (!document.hidden) {\n          statics.__clearCache();\n        }\n      }, false);\n    }\n  }\n});\n"
  ]
}