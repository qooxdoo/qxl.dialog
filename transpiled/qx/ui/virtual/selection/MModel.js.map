{
  "version": 3,
  "sources": [
    "/home/travis/build/qooxdoo/qxl.dialog/node_modules/@qooxdoo/compiler/node_modules/@qooxdoo/framework/source/class/qx/ui/virtual/selection/MModel.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Mixin",
    "define",
    "construct",
    "_initSelectionManager",
    "__defaultSelection",
    "data",
    "Array",
    "initSelection",
    "properties",
    "selection",
    "check",
    "event",
    "apply",
    "nullable",
    "deferredInit",
    "selectionMode",
    "init",
    "dragSelection",
    "quickSelection",
    "events",
    "members",
    "_manager",
    "__ignoreChangeSelection",
    "__ignoreManagerChangeSelection",
    "setValue",
    "resetSelection",
    "setSelection",
    "getValue",
    "getSelection",
    "resetValue",
    "self",
    "selectionDelegate",
    "isItemSelectable",
    "row",
    "_provider",
    "isSelectable",
    "styleSelectable",
    "type",
    "wasAdded",
    "styleSelectabled",
    "styleUnselectabled",
    "ui",
    "virtual",
    "Row",
    "getPane",
    "attachPointerEvents",
    "attachKeyEvents",
    "addListener",
    "_onManagerChangeSelection",
    "setAutoScrollIntoView",
    "value",
    "_autoScrollIntoView",
    "getAutoScrollIntoView",
    "_updateSelection",
    "_onChangeSelection",
    "_applySelection",
    "old",
    "removeListener",
    "_applySelectionMode",
    "setMode",
    "_applyDragSelection",
    "setDrag",
    "_applyQuickSelection",
    "setQuick",
    "e",
    "newSelection",
    "i",
    "getLength",
    "item",
    "getItem",
    "selectables",
    "_getSelectables",
    "index",
    "indexOf",
    "_reverseLookup",
    "push",
    "_beforeApplySelection",
    "lang",
    "Type",
    "isFunction",
    "equals",
    "replaceSelection",
    "ex",
    "selectItem",
    "length",
    "__synchronizeSelection",
    "_afterApplySelection",
    "fireDataEvent",
    "getData",
    "getOldData",
    "__isSelectionEquals",
    "managerSelection",
    "_getDataFromRow",
    "__replaceSelection",
    "args",
    "concat",
    "temp",
    "splice",
    "dispose",
    "removeAll",
    "_applyDefaultSelection",
    "destruct",
    "MModel"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2011 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Christian Hagendorn (chris_schmidt)\n\n************************************************************************ */\n\n/**\n * Implements the different selection modes single, multi, additive and one\n * selection with there drag and quick selection.\n *\n * Example how to use selection:\n * <pre class=\"javascript\">\n * var rawData = [];\n * for (var i = 0; i < 2500; i++) {\n *  rawData[i] = \"Item No \" + i;\n * }\n *\n * var model = qx.data.marshal.Json.createModel(rawData);\n * var list = new qx.ui.list.List(model);\n *\n * // Pre-Select \"Item No 20\"\n * list.getSelection().push(model.getItem(20));\n *\n * // log change selection\n * list.getSelection().addListener(\"change\", function(e) {\n *   this.debug(\"Selection: \" + list.getSelection().getItem(0));\n * }, this);\n * </pre>\n *\n * @internal\n */\nqx.Mixin.define(\"qx.ui.virtual.selection.MModel\",\n{\n  construct : function()\n  {\n    this._initSelectionManager();\n    this.__defaultSelection = new qx.data.Array();\n    this.initSelection(this.__defaultSelection);\n  },\n\n\n  properties :\n  {\n    /** Current selected items */\n    selection :\n    {\n      check : \"qx.data.Array\",\n      event : \"changeSelection\",\n      apply : \"_applySelection\",\n      nullable : false,\n      deferredInit : true\n    },\n\n\n    /**\n     * The selection mode to use.\n     *\n     * For further details please have a look at:\n     * {@link qx.ui.core.selection.Abstract#mode}\n     */\n    selectionMode :\n    {\n      check : [\"single\", \"multi\", \"additive\", \"one\"],\n      init : \"single\",\n      apply : \"_applySelectionMode\"\n    },\n\n\n    /**\n     * Enable drag selection (multi selection of items through\n     * dragging the pointer in pressed states).\n     *\n     * Only possible for the selection modes <code>multi</code> and <code>additive</code>\n     */\n    dragSelection :\n    {\n      check : \"Boolean\",\n      init : false,\n      apply : \"_applyDragSelection\"\n    },\n\n\n    /**\n     * Enable quick selection mode, where no tap is needed to change the selection.\n     *\n     * Only possible for the modes <code>single</code> and <code>one</code>.\n     */\n    quickSelection :\n    {\n      check : \"Boolean\",\n      init : false,\n      apply : \"_applyQuickSelection\"\n    }\n  },\n\n\n  events : {\n    /**\n     * This event is fired as soon as the content of the selection property changes, but\n     * this is not equal to the change of the selection of the widget. If the selection\n     * of the widget changes, the content of the array stored in the selection property\n     * changes. This means you have to listen to the change event of the selection array\n     * to get an event as soon as the user changes the selected item.\n     * <pre class=\"javascript\">obj.getSelection().addListener(\"change\", listener, this);</pre>\n     */\n    \"changeSelection\" : \"qx.event.type.Data\",\n\n    /** Fires after the value was modified */\n    \"changeValue\" : \"qx.event.type.Data\"\n  },\n\n\n  members :\n  {\n    /** @type {qx.ui.virtual.selection.Row} selection manager */\n    _manager : null,\n\n\n    /** @type {Boolean} flag to ignore the selection change from {@link #selection} */\n    __ignoreChangeSelection : false,\n\n\n    /** @type {Boolean} flag to ignore the selection change from <code>_manager</code> */\n    __ignoreManagerChangeSelection : false,\n\n    __defaultSelection : null,\n\n\n    /**\n     * setValue implements part of the {@link qx.ui.form.IField} interface.\n     *\n     * @param selection {qx.data.IListData|null} List data to select as value.\n     * @return {null} The status of this operation.\n     */\n    setValue : function(selection) {\n      if (null === selection) {\n        this.resetSelection();\n      } else {\n        this.setSelection(selection);\n      }\n\n      return null;\n    },\n\n\n    /**\n     * getValue implements part of the {@link qx.ui.form.IField} interface.\n     *\n     * @return {qx.data.IListData} The current selection.\n     */\n    getValue : function() {\n      return this.getSelection();\n    },\n\n\n    /**\n     * resetValue implements part of the {@link qx.ui.form.IField} interface.\n     */\n    resetValue : function() {\n      this.resetSelection();\n    },\n\n\n    /**\n     * Initialize the selection manager with his delegate.\n     */\n    _initSelectionManager : function()\n    {\n      var self = this;\n      var selectionDelegate =\n      {\n        isItemSelectable : function(row) {\n          return self._provider.isSelectable(row);\n        },\n\n        styleSelectable : function(row, type, wasAdded)\n        {\n          if (type != \"selected\") {\n            return;\n          }\n\n          if (wasAdded) {\n            self._provider.styleSelectabled(row);\n          } else {\n            self._provider.styleUnselectabled(row);\n          }\n        }\n      };\n\n      this._manager = new qx.ui.virtual.selection.Row(\n        this.getPane(), selectionDelegate\n      );\n      this._manager.attachPointerEvents(this.getPane());\n      this._manager.attachKeyEvents(this);\n      this._manager.addListener(\"changeSelection\", this._onManagerChangeSelection, this);\n    },\n\n\n    /**\n     * Determines, if automatically scrolling of selected item is active.\n     * Set <code>false</code> to suspend auto scrolling.\n     *\n     * @param value {Boolean} Set <code>false</code> to suspend auto scrolling.\n     */\n    setAutoScrollIntoView : function(value)\n    {\n      this._manager._autoScrollIntoView = value;\n    },\n\n\n    /**\n     * Returns true, if automatically scrolling of selected item is active.\n     *\n     * @return {Boolean} Returns <code>false</code> if auto scrolling is suspended.\n     */\n    getAutoScrollIntoView : function()\n    {\n      return this._manager._autoScrollIntoView;\n    },\n\n\n    /**\n     * Method to update the selection, this method can be used when the model has\n     * changes.\n     */\n    _updateSelection : function()\n    {\n      if (this._manager == null) {\n        return;\n      }\n\n      this._onChangeSelection();\n    },\n\n\n    /*\n    ---------------------------------------------------------------------------\n      APPLY ROUTINES\n    ---------------------------------------------------------------------------\n    */\n\n\n    // apply method\n    _applySelection : function(value, old)\n    {\n      value.addListener(\"change\", this._onChangeSelection, this);\n\n      if (old != null) {\n        old.removeListener(\"change\", this._onChangeSelection, this);\n      }\n\n      this._onChangeSelection();\n    },\n\n\n    // apply method\n    _applySelectionMode : function(value, old) {\n      this._manager.setMode(value);\n    },\n\n\n    // apply method\n    _applyDragSelection : function(value, old) {\n      this._manager.setDrag(value);\n    },\n\n\n    // apply method\n    _applyQuickSelection : function(value, old) {\n      this._manager.setQuick(value);\n    },\n\n\n    /*\n    ---------------------------------------------------------------------------\n      SELECTION HANDLERS\n    ---------------------------------------------------------------------------\n    */\n\n\n    /**\n     * Event handler for the internal selection change {@link #selection}.\n     *\n     * @param e {qx.event.type.Data} the change event.\n     */\n    _onChangeSelection : function(e)\n    {\n      if (this.__ignoreManagerChangeSelection == true) {\n        return;\n      }\n\n      this.__ignoreChangeSelection = true;\n      var selection = this.getSelection();\n\n      var newSelection = [];\n      for (var i = 0; i < selection.getLength(); i++)\n      {\n        var item = selection.getItem(i);\n        var selectables = this._getSelectables();\n        var index = -1;\n\n        if (selectables != null) {\n          index = selectables.indexOf(item);\n        }\n\n        var row = this._reverseLookup(index);\n\n        if (row >= 0) {\n          newSelection.push(row);\n        }\n      }\n\n      if (this._beforeApplySelection != null &&\n          qx.lang.Type.isFunction(this._beforeApplySelection)) {\n        this._beforeApplySelection(newSelection);\n      }\n\n      try {\n        if (!qx.lang.Array.equals(newSelection, this._manager.getSelection())) {\n          this._manager.replaceSelection(newSelection);\n        }\n      }\n      catch(ex)\n      {\n        this._manager.selectItem(newSelection[newSelection.length - 1]);\n      }\n      this.__synchronizeSelection();\n\n      if (this._afterApplySelection != null &&\n          qx.lang.Type.isFunction(this._afterApplySelection)) {\n        this._afterApplySelection();\n      }\n\n      this.__ignoreChangeSelection = false;\n    },\n\n\n    /**\n     * Event handler for the selection change from the <code>_manager</code>.\n     *\n     * @param e {qx.event.type.Data} the change event.\n     */\n    _onManagerChangeSelection : function(e)\n    {\n      if (this.__ignoreChangeSelection == true) {\n        return;\n      }\n\n      this.__ignoreManagerChangeSelection = true;\n\n      this.__synchronizeSelection();\n\n      this.__ignoreManagerChangeSelection = false;\n\n      this.fireDataEvent(\"changeValue\", e.getData(), e.getOldData());\n    },\n\n\n    /**\n     * Synchronized the selection form the manager with the local one.\n     */\n    __synchronizeSelection : function()\n    {\n      if (this.__isSelectionEquals()) {\n        return;\n      }\n\n      var managerSelection = this._manager.getSelection();\n      var newSelection = [];\n\n      for (var i = 0; i < managerSelection.length; i++)\n      {\n        var item = this._getDataFromRow(managerSelection[i]);\n\n        if (item != null) {\n          newSelection.push(item);\n        }\n      }\n\n      this.__replaceSelection(newSelection);\n    },\n\n\n    /**\n     * Replace the current selection with the passed selection Array.\n     *\n     * @param newSelection {qx.data.Array} The new selection.\n     */\n    __replaceSelection : function(newSelection)\n    {\n      var selection = this.getSelection();\n      if (newSelection.length > 0)\n      {\n        var args = [0, selection.getLength()];\n        args = args.concat(newSelection);\n        // dispose data array returned by splice to avoid memory leak\n        var temp = selection.splice.apply(selection, args);\n        temp.dispose();\n      } else {\n        selection.removeAll();\n      }\n    },\n\n\n    /**\n     * Checks whether the local and the manager selection are equal.\n     *\n     * @return {Boolean} <code>true</code> if the selections are equal,\n     *   <code>false</code> otherwise.\n     */\n    __isSelectionEquals : function()\n    {\n      var selection = this.getSelection();\n      var managerSelection = this._manager.getSelection();\n\n      if (selection.getLength() !== managerSelection.length) {\n        return false;\n      }\n\n      for (var i = 0; i < selection.getLength(); i++)\n      {\n        var item = selection.getItem(i);\n        var selectables = this._getSelectables();\n        var index = -1;\n\n        if (selectables != null) {\n          index = selectables.indexOf(item);\n        }\n        var row = this._reverseLookup(index);\n\n        if (row !== managerSelection[i]) {\n          return false;\n        };\n      }\n      return true;\n    },\n\n\n    /**\n     * Helper Method to select default item.\n     */\n    _applyDefaultSelection : function() {\n      if (this._manager != null) {\n        this._manager._applyDefaultSelection();\n      }\n    }\n  },\n\n\n  destruct : function()\n  {\n    this._manager.dispose();\n    this._manager = null;\n    if (this.__defaultSelection) {\n      this.__defaultSelection.dispose();\n    }\n  }\n});\n"
  ]
}